/* --- Starlane | Minimal Solid Theme --- */

/* 0. 全局禁用动画与过渡，确保极致性能 */
* { animation: none !important; transition: none !important; }

:root {
    --font-main: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    --radius-sm: 6px;
    --radius-md: 10px;
    --sidebar-w: 240px;
    --content-max: 1200px;
    --fs-13: 13px;
    --fs-14: 14px;
}

/* 主题色 */
body[data-theme="light"] {
    --bg: #f7f8fa;
    --surface: #ffffff;
    --border: #e5e7eb;
    --text: #14181f;
    --muted: #6b7280;
    --title: #0b0f16;
    --accent: #2563eb;
    --accent-weak: #e8f0ff;
    --overlay: rgba(0,0,0,0.35);
    --card-hover: #f3f4f6;
}
body[data-theme="dark"] {
    --bg: #0f1115;
    --surface: #151821;
    --border: #2a313c;
    --text: #e5e7eb;
    --muted: #9aa4b2;
    --title: #ffffff;
    --accent: #60a5fa;
    --accent-weak: #17223a;
    --overlay: rgba(0,0,0,0.65);
    --card-hover: #20242e;
}

html { color-scheme: light dark; font-family: var(--font-main); }
body { background: var(--bg); color: var(--text); overflow: hidden; }
.background-aurora { position: fixed; inset: 0; z-index: -1; background: var(--bg); }

/* 布局结构 */
#main-content-wrapper { height: 100vh; margin-left: var(--sidebar-w); overflow-y: auto; }
.main-content-inner { max-width: var(--content-max); margin: 0 auto; padding: 24px 16px 48px; }
header { text-align: center; margin-bottom: 28px; }
#page-title { font-size: 28px; font-weight: 700; color: var(--title); margin-bottom: 20px; }

/* 分组与卡片 (前台展示) */
.group { margin-bottom: 28px; }
.group-title { font-size: 15px; font-weight: 600; color: var(--text); margin-bottom: 10px; padding-left: 8px; border-left: 3px solid var(--accent); }
.items-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(168px, 1fr)); gap: 12px; }

.link-card {
    display: flex; flex-direction: column; align-items: center; gap: 10px;
    background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-md);
    text-decoration: none; color: inherit; padding: 14px 12px;
}
.link-card:hover { border-color: var(--accent); background: var(--accent-weak); }
.link-icon { width: 36px; height: 36px; border-radius: var(--radius-sm); object-fit: contain; }
.link-name { font-size: 14px; font-weight: 600; line-height: 1.35; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; }

/* 搜索框 */
.search-wrapper { position: relative; max-width: 520px; margin: 0 auto; }
.search-icon { position: absolute; top: 50%; left: 12px; transform: translateY(-50%); color: var(--muted); pointer-events: none; }
#search-input { width: 100%; padding: 10px 12px 10px 40px; font-size: 14px; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-md); color: var(--text); }
#search-input:focus { outline: 2px solid var(--accent); border-color: var(--accent); }

/* 侧边栏 */
#sidebar { position: fixed; top: 0; left: 0; width: var(--sidebar-w); height: 100vh; background: var(--surface); border-right: 1px solid var(--border); z-index: 100; display: flex; flex-direction: column; }
.sidebar-header { padding: 16px; border-bottom: 1px solid var(--border); }
#sidebar-title { font-size: 18px; color: var(--title); }
#sidebar-group-list { list-style: none; padding: 6px 0; overflow-y: auto; }
#sidebar-group-list li a { display: block; padding: 10px 16px; margin: 2px 8px; color: var(--muted); text-decoration: none; font-weight: 600; border-radius: var(--radius-sm); }
#sidebar-group-list li a:hover { background: var(--accent-weak); color: var(--text); }
#sidebar-group-list li a.active { background: var(--accent-weak); color: var(--accent); }

/* 顶部按钮 */
.settings-btn, .menu-toggle-btn { position: fixed; top: 12px; z-index: 1010; width: 40px; height: 40px; background: var(--surface); color: var(--text); border: 1px solid var(--border); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.settings-btn { right: 16px; }
.menu-toggle-btn { left: 16px; display: none; }
.settings-btn:hover, .menu-toggle-btn:hover { border-color: var(--accent); }

/* 模态框容器 */
.modal-overlay { position: fixed; inset: 0; background: var(--overlay); z-index: 998; display: none; align-items: center; justify-content: center; }
.modal-overlay.visible { display: flex; }
.modal-content {
    background: var(--surface); color: var(--text); border: 1px solid var(--border); border-radius: var(--radius-md);
    width: 95%; max-width: 1000px; height: 85vh; display: flex; flex-direction: column; padding: 0; position: relative;
}
.close-btn { position: absolute; top: 12px; right: 12px; width: 30px; height: 30px; background: transparent; border: 1px solid var(--border); border-radius: 50%; color: var(--muted); font-size: 18px; cursor: pointer; z-index: 10; }
.modal-content > h2 { padding: 16px 20px 0; margin: 0; font-size: 18px; }

/* Tabs */
.tabs { display: flex; border-bottom: 1px solid var(--border); margin: 10px 20px 0; }
.tab-btn { padding: 10px 0; margin: 0 16px; border: none; background: none; cursor: pointer; font-size: 14px; font-weight: 600; color: var(--muted); border-bottom: 2px solid transparent; }
.tab-btn:first-child { margin-left: 0; }
.tab-btn.active { color: var(--accent); border-bottom-color: var(--accent); }
.tab-content { display: none; padding: 20px; overflow-y: auto; flex: 1; }
.tab-content.active { display: block; }

/* --- 编辑器板 (Editor Board) --- */
#layout-tab { display: none; flex-direction: column; gap: 16px; }
#layout-tab.active { display: flex; }
.editor-toolbar { display: flex; justify-content: space-between; align-items: center; padding-bottom: 10px; }
.hint-text { font-size: 13px; color: var(--muted); margin: 0; }

#editor-board {
    display: flex; flex-direction: column; gap: 20px; padding-bottom: 40px;
}

/* 编辑器中的分类容器 */
.editor-group {
    background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius-md);
    padding: 10px;
}
.editor-group-header {
    display: flex; align-items: center; gap: 10px; margin-bottom: 10px; padding: 0 4px;
}
.drag-handle-group { cursor: grab; color: var(--muted); padding: 4px; }
.group-name-input {
    background: transparent; border: 1px solid transparent; color: var(--text); font-weight: 700; font-size: 15px;
    padding: 4px 8px; border-radius: var(--radius-sm); flex: 1;
}
.group-name-input:focus { background: var(--surface); border-color: var(--accent); outline: none; }
.group-controls button {
    background: transparent; border: none; color: var(--muted); cursor: pointer; padding: 4px;
}
.group-controls button:hover { color: #d14343; }

/* 编辑器中的卡片列表 */
.editor-items-list {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px;
    min-height: 60px; /* 保证空列表也能被拖入 */
}
.editor-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    padding: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: grab;
    position: relative;
    user-select: none;
    transition: border-color 0.15s, background-color 0.15s !important;
}
.editor-card:hover {
    border-color: var(--accent);
    background-color: var(--accent-weak);
}
.editor-card:active {
    cursor: grabbing;
}
.editor-card img { width: 28px; height: 28px; border-radius: 4px; object-fit: cover; pointer-events: none; }
.editor-card span { font-size: 13px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; pointer-events: none; }

.add-item-btn {
    border: 1px dashed var(--border); background: transparent; color: var(--muted);
    border-radius: var(--radius-sm); cursor: pointer; font-size: 13px;
    display: flex; align-items: center; justify-content: center; min-height: 50px;
}
.add-item-btn:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-weak); }

/* SortableJS 样式 */
.sortable-ghost { opacity: 0.4; background: var(--accent-weak); border: 1px dashed var(--accent); }
.sortable-drag { cursor: grabbing; }

/* 底部操作栏 */
.modal-actions {
    padding: 16px 20px; border-top: 1px solid var(--border); background: var(--surface);
    display: flex; justify-content: space-between; align-items: center;
}
.main-actions, .io-actions { display: flex; gap: 10px; }
.action-btn {
    padding: 8px 14px; border-radius: var(--radius-sm); font-size: 13px; font-weight: 600; cursor: pointer;
    border: 1px solid var(--border); background: var(--surface); color: var(--text);
}
.action-btn.primary { background: var(--accent); color: #fff; border-color: var(--accent); }
.action-btn.secondary { color: var(--accent); border-color: var(--accent); }
.action-btn.danger { color: #d14343; border-color: transparent; }
.action-btn.danger:hover { background: #fde8e8; }

/* 页面设置表单 */
.settings-form { display: flex; flex-direction: column; gap: 16px; max-width: 600px; margin: 0 auto; }
.form-group { display: grid; grid-template-columns: 120px 1fr; align-items: center; gap: 16px; }
.settings-form input:not([type="radio"]):not([type="checkbox"]):not([type="color"]),
.settings-form select {
    padding: 8px; background: var(--bg); border: 1px solid var(--border); color: var(--text); border-radius: var(--radius-sm); width: 100%;
}

/* --- 修复单选按钮样式 --- */
.settings-form input[type="radio"] {
    width: 16px !important;
    height: 16px !important;
    margin: 0;
    padding: 0;
    border: none;
    background: none;
    cursor: pointer;
    accent-color: var(--accent);
}
.radio-group {
    display: flex; gap: 24px; align-items: center;
}
.radio-option {
    display: flex; align-items: center; gap: 8px;
    cursor: pointer; font-size: 14px; color: var(--text); user-select: none;
}
.radio-option:hover span { color: var(--accent); }

/* 颜色选择器微调 */
.settings-form input[type="color"] {
    padding: 2px 4px; height: 36px; cursor: pointer; width: 100%; border: 1px solid var(--border); background: var(--bg); border-radius: var(--radius-sm);
}

/* --- Dialog 弹窗样式 --- */
dialog::backdrop { background: rgba(0, 0, 0, 0.5); }
dialog {
    border: 1px solid var(--border); border-radius: var(--radius-md); background: var(--surface); color: var(--text);
    padding: 20px; max-width: 400px; width: 100%; box-shadow: 0 10px 25px rgba(0,0,0,0.2);
}
dialog h3 { margin-top: 0; margin-bottom: 16px; font-size: 16px; }
.form-group-vertical { display: flex; flex-direction: column; gap: 6px; margin-bottom: 14px; }
.form-group-vertical label { font-size: 13px; font-weight: 600; color: var(--muted); }
.form-group-vertical input {
    padding: 8px 10px; border: 1px solid var(--border); border-radius: var(--radius-sm);
    background: var(--bg); color: var(--text); font-size: 14px; width: 100%;
}
.form-group-vertical input:focus { outline: 2px solid var(--accent); border-color: var(--accent); }
.icon-input-row { display: flex; gap: 8px; }
.icon-input-row input { flex: 1; }
.helper-text { font-size: 12px; color: var(--muted); margin: 2px 0 0; }

.preview-area { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; padding: 10px; background: var(--bg); border-radius: var(--radius-sm); }
.preview-area img { width: 32px; height: 32px; object-fit: contain; }
.preview-area span { font-size: 12px; color: var(--muted); }

.dialog-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; }
.right-btns { display: flex; gap: 10px; }
.danger-text { color: #d14343; border: none; background: none; padding: 0; cursor: pointer;}

/* 移动端适配 */
@media (max-width: 992px) {
    #sidebar { transform: translateX(-100%); }
    body.sidebar-visible #sidebar { transform: translateX(0); }
    #main-content-wrapper { margin-left: 0; }
    .menu-toggle-btn { display: flex; }
}
.hidden { display: none !important; }